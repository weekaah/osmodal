!function(){"use strict";function t(){var t=document.createDocumentFragment();this.container=u("div","osm-container",t),this.modal=u("div","osm",this.container),this.modal.style.height=this.options.height+"px",this.modal.style.minHeight=this.options.minHeight+"px",this.modal.style.width=this.options.width+"px",this.modal.style.minWidth=this.options.minWidth+"px",this.modal.style.top=this.options.top+"px",this.options.minWidth>=this.options.width?this.modal.style.left="calc(50% - "+this.options.minWidth/2+"px)":this.modal.style.left="calc(50% - "+this.options.width/2+"px)",this.ctrls=u("div","osm__ctrls",this.modal),this.minBtn=u("div","osm__btn osm__min",this.ctrls),this.minBtn.title=this.options.minimizeButtonLabel,this.expBtn=u("div","osm__btn osm__exp",this.ctrls),this.expBtn.title=this.options.expandButtonLabel,this.clsBtn=u("div","osm__btn osm__cls",this.ctrls),this.clsBtn.title=this.options.closeButtonLabel,this.head=u("div","osm__head",this.modal),this.head.innerHTML=this.options.title,this.body=u("div","osm__body",this.modal),this.body.innerHTML=this.options.content,this.options.resizable&&(this.sizers=u("div","osm__sizers",this.modal),this.n=u("div","osm__n",this.sizers),this.ne=u("div","osm__ne",this.sizers),this.e=u("div","osm__e",this.sizers),this.se=u("div","osm__se",this.sizers),this.s=u("div","osm__s",this.sizers),this.sw=u("div","osm__sw",this.sizers),this.w=u("div","osm__w",this.sizers),this.nw=u("div","osm__nw",this.sizers)),this.indicator=u("div","osm-indicator",t),this.indicator.classList.remove("osm-indicator--show"),document.body.appendChild(t)}function i(){var t=this;this.sizers.addEventListener("mousedown",function(t){t.preventDefault()}),this.n.addEventListener("mousedown",function(i){var o=r(t.modal).height,e=r(t.modal).bottom,s=i.pageY;window.onmousemove=function(i){var n=t.options.minHeight<=o-(i.pageY-s);t.modal.style.bottom=e+"px",n&&(t.modal.style.height=o-(i.pageY-s)+"px"),t.modal.style.top=""}}),this.s.addEventListener("mousedown",function(i){var o=r(t.modal).height,e=r(t.modal).top,s=i.pageY;window.onmousemove=function(i){var n=t.options.minHeight<=o+(i.pageY-s);t.modal.style.top=e+"px",n&&(t.modal.style.height=o+(i.pageY-s)+"px"),t.modal.style.bottom=""}}),this.w.addEventListener("mousedown",function(i){var o=r(t.modal).width,e=r(t.modal).right,s=i.pageX;window.onmousemove=function(i){var n=t.options.minWidth<=o-(i.pageX-s);t.modal.style.right=e+"px",n&&(t.modal.style.width=o-(i.pageX-s)+"px"),t.modal.style.left=""}}),this.e.addEventListener("mousedown",function(i){var o=r(t.modal).width,e=r(t.modal).left,s=i.pageX;window.onmousemove=function(i){var n=t.options.minWidth<=o+(i.pageX-s);t.modal.style.left=e+"px",n&&(t.modal.style.width=o+(i.pageX-s)+"px"),t.modal.style.right=""}}),this.ne.addEventListener("mousedown",function(i){var o=r(t.modal).height,e=r(t.modal).bottom,s=i.pageY,n=r(t.modal).width,l=r(t.modal).left,d=i.pageX;window.onmousemove=function(i){var h=t.options.minHeight<=o-(i.pageY-s),a=t.options.minWidth<=n+(i.pageX-d);t.modal.style.bottom=e+"px",h&&(t.modal.style.height=o-(i.pageY-s)+"px"),t.modal.style.top="",t.modal.style.left=l+"px",a&&(t.modal.style.width=n+(i.pageX-d)+"px"),t.modal.style.right=""}}),this.se.addEventListener("mousedown",function(i){var o=r(t.modal).height,e=r(t.modal).top,s=i.pageY,n=r(t.modal).width,l=r(t.modal).left,d=i.pageX;window.onmousemove=function(i){var h=t.options.minHeight<=o+(i.pageY-s),a=t.options.minWidth<=n+(i.pageX-d);t.modal.style.top=e+"px",h&&(t.modal.style.height=o+(i.pageY-s)+"px"),t.modal.style.bottom="",t.modal.style.left=l+"px",a&&(t.modal.style.width=n+(i.pageX-d)+"px"),t.modal.style.right=""}}),this.sw.addEventListener("mousedown",function(i){var o=r(t.modal).height,e=r(t.modal).top,s=i.pageY,n=r(t.modal).width,l=r(t.modal).right,d=i.pageX;window.onmousemove=function(i){var h=t.options.minHeight<=o+(i.pageY-s),a=t.options.minWidth<=n-(i.pageX-d);t.modal.style.top=e+"px",h&&(t.modal.style.height=o+(i.pageY-s)+"px"),t.modal.style.bottom="",t.modal.style.right=l+"px",a&&(t.modal.style.width=n-(i.pageX-d)+"px"),t.modal.style.left=""}}),this.nw.addEventListener("mousedown",function(i){var o=r(t.modal).height,e=r(t.modal).bottom,s=i.pageY,n=r(t.modal).width,l=r(t.modal).right,d=i.pageX;window.onmousemove=function(i){var h=t.options.minHeight<=o-(i.pageY-s),a=t.options.minWidth<=n-(i.pageX-d);t.modal.style.bottom=e+"px",h&&(t.modal.style.height=o-(i.pageY-s)+"px"),t.modal.style.top="",t.modal.style.right=l+"px",a&&(t.modal.style.width=n-(i.pageX-d)+"px"),t.modal.style.left=""}}),(this.sizers&&window).addEventListener("mouseup",function(){t.snapped||a.call(t),window.onmousemove=null})}function o(){var t=this;this.head.style.cursor="move",this.head.addEventListener("mousedown",function(i){i.preventDefault();var o=i.clientX,e=i.clientY,n=r(t.modal).top,l=r(t.modal).left;t.expanded=!1,m.call(t),t.snapped&&(t.modal.style.left=i.clientX-r(t.modal).width/2+"px",l=r(t.modal).left),window.onmousemove=function(i){i.preventDefault(),t.modal.style.top=n+(i.clientY-e)+"px",t.modal.style.left=l+(i.clientX-o)+"px",i.pageX<=0||i.pageY<=0||i.pageX>=window.innerWidth-5?s.call(t,i):t.indicator.classList.remove("osm-indicator--show")}}),window.addEventListener("mouseup",function(i){window.onmousemove=null,i.pageX<=0?e.call(t,"left"):i.pageY<=0?e.call(t,"top"):i.pageX>=window.innerWidth-5?e.call(t,"right"):t.snapped=!1})}function e(t){a.call(this),this.modal.style.height="100%",this.modal.style.top="0","left"===t?(this.modal.style.width="50%",this.modal.style.left="0"):"top"===t?n.call(this):"right"===t&&(this.modal.style.width="50%",this.modal.style.left="50%"),this.indicator.classList.remove("osm-indicator--show"),window.onmousemove=null,this.snapped=!0}function s(t){var i=this;this.indicator.classList.add("osm-indicator--show"),i.indicator.style.top=t.clientY-r(i.indicator).height/2+"px",i.indicator.style.left=t.clientX-r(i.indicator).width/2+"px"}function n(){a.call(this),p.call(this),this.expBtn.title=this.options.restoreButtonLabel,this.modal.style.height="100%",this.modal.style.width="100%",this.modal.style.top="0",this.modal.style.left="0",this.snapped=!0,this.expanded=!0}function l(){m.call(this),c.call(this),this.expBtn.title=this.options.expandButtonLabel,this.expanded=!1}function d(){a.call(this),p.call(this),this.modal.style.top=window.innerHeight-r(this.head).height+"px",this.modal.style.left="0",this.docked=!0}function h(){m.call(this),c.call(this),this.docked=!1}function a(){this.options.height=r(this.modal).height,this.options.width=r(this.modal).width}function m(){this.modal.style.height=this.options.height+"px",this.modal.style.width=this.options.width+"px"}function p(){this.options.top=r(this.modal).top,this.options.left=r(this.modal).left}function c(){this.modal.style.top=this.options.top+"px",this.modal.style.left=this.options.left+"px"}function r(t){var i=t.getBoundingClientRect(),o=window.innerHeight,e=window.innerWidth;return{height:i.height,width:i.width,top:i.top,right:e-i.right,bottom:o-i.bottom,left:i.left}}function u(t,i,o){var e;return e=document.createElement(t),e.className=i,o&&o.appendChild(e),e}function g(t,i){var o;for(o in i)i.hasOwnProperty(o)&&(t[o]=i[o]);return t}function w(){this.clsBtn.addEventListener("click",this.close.bind(this)),this.minBtn.addEventListener("click",this.dock.bind(this)),this.expBtn.addEventListener("click",this.expand.bind(this))}var f=function(){this.container,this.modal,this.head,this.title,this.content,this.ctrls,this.minBtn,this.expBtn,this.clsBtn,this.body,this.indicator,this.options,this.snapped=!1,this.expanded=!1,this.docked=!1;var t={title:"",content:"",closeButtonLabel:"Close modal",expandButtonLabel:"Expand modal",restoreButtonLabel:"Restore modal",minimizeButtonLabel:"Minimize modal",draggable:!0,resizable:!0,height:480,minHeight:280,width:640,minWidth:280};this.options=arguments[0]&&"object"==typeof arguments[0]?g(t,arguments[0]):t};f.prototype.open=function(){t.call(this),w.call(this),this.options.resizable&&i.call(this),this.options.draggable&&o.call(this)},f.prototype.close=function(){this.container.parentNode.removeChild(this.container),this.indicator.parentNode.removeChild(this.indicator)},f.prototype.dock=function(){this.docked?h.call(this):d.call(this)},f.prototype.expand=function(){this.expanded?l.call(this):n.call(this)},f.prototype.restore=function(){l.call(this)},f.prototype.snap=function(t){e.call(this,t)},window.osmodal=function(t,i){return new f(t,i)}}();